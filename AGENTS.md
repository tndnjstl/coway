# Coway 프로젝트 작업 지침

## 1) 기본 원칙
- 모든 코드 변경은 먼저 로컬에서 수정 후 `git`으로 관리한다.
- 배포는 자동 CI/CD가 아니라 `FileZilla`를 사용한 수동 업로드 방식으로 진행한다.
- 배포 전에는 반드시 변경 파일과 영향 범위를 확인한다.

## 2) Git 작업 규칙
- 기본 브랜치: `main` (또는 현재 운영 기준 브랜치)
- 기능/수정 작업은 브랜치를 분리해서 진행한다.
  - 예: `feature/product-option`, `fix/order-validation`
- 커밋 메시지는 목적이 드러나게 작성한다.
  - 예: `fix: 주문서 수량 검증 로직 보완`
- 푸시 전 체크:
  - 변경 파일 확인: `git status`
  - 변경 내용 확인: `git diff` / `git diff --staged`
  - 커밋 이력 확인: `git log --oneline -n 5`

## 3) 배포 방식 (FileZilla)
- 원칙: `git push`와 운영 서버 반영은 별개로 관리한다.
- 배포는 아래 순서로 진행한다.
  1. 배포 대상 브랜치 최신화 및 최종 커밋 확인
  2. 이번 배포 파일 목록 정리 (`git diff --name-only <이전배포태그>..HEAD` 또는 수동 목록)
  3. FileZilla 접속 후 대상 경로 확인
  4. 변경 파일만 업로드 (불필요 파일 업로드 금지)
  5. 업로드 직후 핵심 화면/기능 스모크 테스트

## 4) 업로드 제외/주의 항목
- 업로드 제외:
  - `.git/`, `.vscode/`, 로컬 설정 파일, 임시 파일
- 주의 업로드:
  - 환경 의존 파일(설정, 경로, 권한 영향 파일)은 사전 확인 후 반영
  - 대용량 파일은 운영 시간대 영향 고려

## 5) 배포 체크리스트
- [ ] 배포 파일 목록 확정
- [ ] 관련 기능 로컬 점검 완료
- [ ] 백업 또는 롤백 기준 커밋 기록
- [ ] FileZilla 업로드 완료
- [ ] 운영 동작 확인 (주요 페이지, 주문/상품 핵심 기능)

## 6) 롤백 기준
- 문제 발생 시 마지막 정상 커밋 기준으로 즉시 복구한다.
- FileZilla 롤백을 위해 배포 전 원본 파일 백업 또는 이전 버전 파일을 준비한다.
- 장애 내용/원인/조치 내역을 간단히 기록한다.

## 7) 우선 대상 파일 (현재 컨텍스트)
- `app/helpers/common_function.php`
- `app/controllers/ProductController.php`
- `app/views/order_form_view.php`
